{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/nyTimes.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../article/article.component\";\n\nfunction ArticlesListComponent_div_0_app_article_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"app-article\", 4);\n    i0.ɵɵlistener(\"bookmarkClicked\", function ArticlesListComponent_div_0_app_article_1_Template_app_article_bookmarkClicked_0_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return ctx_r6.bookmarkArticle($event);\n    });\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const article_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    i0.ɵɵproperty(\"image\", article_r4 == null ? null : article_r4.multimedia)(\"title\", article_r4 == null ? null : article_r4.title)(\"publicationDate\", article_r4 == null ? null : article_r4.published_date)(\"index\", i_r5)(\"articleAbstract\", article_r4.abstract)(\"articleUrl\", article_r4.short_url)(\"bookmarked\", article_r4.bookmarked);\n  }\n}\n\nfunction ArticlesListComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2);\n    i0.ɵɵtemplate(1, ArticlesListComponent_div_0_app_article_1_Template, 1, 7, \"app-article\", 3);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.listOfArticles);\n  }\n}\n\nfunction ArticlesListComponent_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5);\n    i0.ɵɵelementStart(1, \"div\", 6);\n    i0.ɵɵelement(2, \"img\", 7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 8);\n    i0.ɵɵtext(4, \" Empty List \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nexport let ArticlesListComponent = /*#__PURE__*/(() => {\n  class ArticlesListComponent {\n    constructor(NyTimesService) {\n      this.NyTimesService = NyTimesService;\n      this.listOfArticles = [];\n      this.Articles = [];\n      this.bookmarkedList = [];\n      this.savedBookmarksArray = [];\n      this.savedBookmarksString = [];\n    } // code description:\n    // after getting all articles I'm filling the bookmark icon if any article is bookmarked\n    // the bookmarkArticle function is triggered everytime I hit the bookmark icon.\n    // and of course when the page is destroyed I'm emptying the articles store and saving all bookmarked ones.\n\n\n    ngOnInit() {\n      let self = this;\n      this.NyTimesService.bookmarks.subscribe(data => {\n        this.bookmarkedList = data ? data : [];\n      });\n      this.NyTimesService.articles.subscribe(data => {\n        if (data) {\n          self.Articles = data.results;\n          this.bookMarkArticles(self.Articles);\n        }\n      });\n    }\n\n    bookMarkArticles(articles) {\n      if (this.bookmarkedList && this.bookmarkedList.length > 0) {\n        articles.forEach(art => {\n          let found = this.bookmarkedList.find(BA => art.title == BA.title);\n          art['bookmarked'] = found ? true : false;\n        });\n        this.listOfArticles = articles;\n      } else {\n        this.listOfArticles = articles;\n      }\n    }\n\n    bookmarkArticle(event) {\n      let alreadyExist = this.bookmarkedList.find(BA => this.Articles[event].title == BA.title);\n\n      if (alreadyExist) {\n        let indexOfBA = this.bookmarkedList.findIndex(element => {\n          element.title == this.Articles[event].title;\n        });\n        this.bookmarkedList.splice(indexOfBA, 1);\n      } else {\n        this.bookmarkedList.push(this.Articles[event]);\n      }\n    }\n\n    ngOnDestroy() {\n      this.NyTimesService.bookmarks.next(this.bookmarkedList);\n      this.NyTimesService.articles.next(undefined);\n    }\n\n  }\n\n  ArticlesListComponent.ɵfac = function ArticlesListComponent_Factory(t) {\n    return new (t || ArticlesListComponent)(i0.ɵɵdirectiveInject(i1.NyTimesService));\n  };\n\n  ArticlesListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ArticlesListComponent,\n    selectors: [[\"app-articles-list\"]],\n    decls: 3,\n    vars: 2,\n    consts: [[\"class\", \"main-container\", 4, \"ngIf\", \"ngIfElse\"], [\"emptyState\", \"\"], [1, \"main-container\"], [3, \"image\", \"title\", \"publicationDate\", \"index\", \"articleAbstract\", \"articleUrl\", \"bookmarked\", \"bookmarkClicked\", 4, \"ngFor\", \"ngForOf\"], [3, \"image\", \"title\", \"publicationDate\", \"index\", \"articleAbstract\", \"articleUrl\", \"bookmarked\", \"bookmarkClicked\"], [1, \"empty-state-container\"], [1, \"empty-state-img\"], [\"src\", \"./assets/Icons/empty-state.jpeg\"], [1, \"empty-state-desc\"]],\n    template: function ArticlesListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, ArticlesListComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, ArticlesListComponent_ng_template_1_Template, 5, 0, \"ng-template\", null, 1, i0.ɵɵtemplateRefExtractor);\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(2);\n\n        i0.ɵɵproperty(\"ngIf\", ctx.listOfArticles.length > 0)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i2.NgIf, i2.NgForOf, i3.ArticleComponent],\n    styles: [\".main-container{width:100%;height:100%;overflow-y:scroll;padding-top:82px}.empty-state-container{text-align:center;padding-top:35vh;width:100%;height:100%}.empty-state-container .empty-state-img{margin-bottom:10px}.empty-state-container .empty-state-img img{width:200px;height:200px;border-radius:70px}.empty-state-container .empty-state-desc{color:#a9a9a9;margin-bottom:10px}\"],\n    encapsulation: 2\n  });\n  return ArticlesListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}